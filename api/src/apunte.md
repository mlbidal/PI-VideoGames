MIDDLEWARE

SON METODOS O FUNCIONES QUE PODEMOS METER Y VAN A EJECUTARSE EN EL MEDIO DE NUESTRO HTTP





CONTROLLERS FUNCIONES: REALIZO LOS GET A LA API Y A LA DB.
ME TRAIGO LA INFO. 
LA INFO DE LA API ME LLEGA COMO DATA
CUANDO HAGO EL GET EN LAS FUNCIONES DEL CONTROLLERS AL END POINT DE VIDEO GAMES, ME VA A TRAER TODA LA INFO
ASI QUE HAGO UN MAP Y DESPUES UN PUSH A UN ARREGLO VACIO SOLO CON LOS ATRIBUTOS/PROPIEDADES QUE ME PIDE EL README

LA INFO DE LA DB ME LLEGA COMO UN OBJETO JSON
TRABAJO SOBRE EL MODELO VIDEOGAMES
REALIZO UN FIND ALL AL MODELS DE VIDEOGAME QUE TENGA UN INCLUDES AL GENERS, OSEA LE DIGO "TRAEME TODO LO QUE INCLUYA EL MODEL GENRES.
PORQUE EN EL MODELS VIDEOGAME NO TENGO GUARDADO LOS GENEROS, LOS TENGO GUARDADOS EN EL MODEL GENERS. ENTONCES VOY A NECESITAR RELACIONARLOS,
PORQUE SI CREO UN VIDEO JUEGO NUNCA ME VA A INCLUIR EL GENERO CON EL ATRIBUTO NAME.

CONCATENO LOS DOS GET EN UNA FUNCION QUE DESPUES VOY A REUTILIZAR


EXPRESS

* ES UN FRAMEWORK DE APLICACION WEB PARA NODE JS Y NOS PROPORCIONA UNA SERIA DE FUNCIONES, METODOS Y MIDDLEWARE QUE NOS PERMITEN CREAR APLICAICONES.
* REQ = REQUERIMIENTO
* RES = RESPUESTA, EL RES ES LO QUE VA A RESPONDER MI SERVIDOR (LOCALHOST:3000)

1. RUTA PRINCIPAL
realizo un middleware
va a tener la ruta, en este caso es la principal y le paso una funcion, que va a tener como parametro un req y un res
router.get("/", async (req, res) => {
    res.status(200).send(videogameName)   ahi respondo
}
LA RUTA PRINCIPAL VA A SER LA DE VIDEOGAMES Y LA DEL QUERY, LA DEL QUERY ME VA A SERVIR PARA BUSCAR EN EL FRONT POR NOMBRE EN EL SEARCH.
EL req.query.name ES LO Q ME VIENE POR LA URL, PREGUNTO SI HAY UN QUERY CON LA PROPIEDAD NAME. ('/VIDEOGAME?NAME=...')
LLAMO A LA FUNCION CONTROLADA QUE ME TRAE TODOS LOS VIDEOGAMES, SI HAY NAME LA FILTRO Y LE DIGO QUE DEL ELEMENTO ME TRAIGA LOS QUE TIENEN LA PROPIEDAD NAME

* EN EL FRONT TENGO EL INPUT DE BUSQUEDA, CUANDO SE BUSCA ALGO SE DISPARA EL SUBMIT, ESE SUBMIT VA A DISPARAR UNA ACCION QUE SE TRAE LA RUTA POR QUERY

2. RUTA GENEROS
EN ESTA RUTA QUIERO HACER UN SOLO LLAMADO A LA API Y QUE DESPUES ME LO GUARDE EN LA BASE DE DATOS
PRIMERO ME TRAIGO LA INFO DE LA API CON EL ENDPOINT, DESPUES ME GUAARDO LA INFO DE LA API, 
GENRES ES UN OBJETO
CON UN FOR EACH A CADA UNO DE LOS GENEROS, ENTRA AL MODELO GENERO Y CREA CADA UNO SI NO ESTA.
ME GUARDO TODO EN UNA VARIABLE POR UNICA VEZ Y DESPUES CON UN FINDALL ME LO TRAIGO CADA VEZ LOS GENEROS DE LA DB

3. RUTA DEL POST
ME TRAIGO DEL BODY TODO LO QUE NECESITO
CREO EL VIDEOGAME PERO SIN LA PROPIEDAD GENERS. A LA PROPIEDAD GENRES LA TRAIGO DE LA BASE DE DATO.
BUSCO EN EL MODELS GENERO TODOS LOS QUE ME COINCIDAN EL NOMBRE
LUEGO CREO EL VIDEO GEAME Y LE AGREGO EL GENERO

4. RUTA POR ID
RE.PARAMS ES LO QUE ME VA A LLEGAR PARA EL ID
ME TRAIGO TODO CON LA FUNCION CONTROLADA, PREGUNTO SI HAY UN ID, SI HAY ME FILTRO EL ELEMNTO CON EL ID



RES.STATUS.JSON = cuando quiero enviar un objeto json
RES.STATUS.SEND = cuando quiero enviar algo sin formato, un objeto plano

REQ.QUERY = me traigo info de la url
REQ.BODY = me traigo info Del Boy que suele ser de un formulario
REQ.PARAMS = es la info para la ruta id

